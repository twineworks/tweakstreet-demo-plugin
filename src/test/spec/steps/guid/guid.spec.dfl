{
  "type": "data-flow",
  "properties": {
    "imports": {
      "code": "# import the standard library\nimport core, data, strings, time, math, fun, locale, regex, bin, decimals from 'std';\n",
      "size": {
        "width": 0,
        "height": 102
      },
      "editor": {
        "collapsed": false
      }
    },
    "parameters": {
      "parameters": {
        "list": []
      },
      "editor": {
        "collapsed": false
      }
    },
    "variables": {
      "variables": {
        "list": []
      },
      "editor": {
        "collapsed": false
      }
    },
    "services": {
      "services": {
        "list": []
      },
      "editor": {
        "collapsed": false
      }
    }
  },
  "steps": [
    {
      "id": "com.twineworks.tweakstreet.library.steps.flatmap.generaterows_d086dfc6-feb7-48a6-9f42-cd5011c9a10a",
      "name": "Generate Rows",
      "type": "com.twineworks.tweakstreet.library.steps.flatmap.generaterows",
      "instanceCount": {
        "widgetType": "expression/number",
        "widgetData": {
          "text": "1"
        },
        "code": "1"
      },
      "data": {
        "meta": {
          "name": "Generate Rows"
        },
        "entryVariables": {
          "variables": {
            "list": []
          },
          "editor": {
            "collapsed": false
          }
        },
        "nrRows": {
          "widgetType": "expression/number",
          "widgetData": {
            "text": "100"
          },
          "code": "100"
        },
        "resultVariables": {
          "variables": {
            "list": []
          },
          "editor": {
            "collapsed": false
          }
        },
        "outputFields": {
          "outputFields": {
            "list": [
              {
                "name": "row_nr",
                "type": "long",
                "value": {
                  "widgetType": "expression/result-ref",
                  "widgetData": {
                    "value": "::results.row_nr"
                  },
                  "code": "::results.row_nr"
                }
              }
            ]
          },
          "editor": {
            "collapsed": false
          }
        },
        "editor": {
          "showEntryVariables": false,
          "showResultVariables": false,
          "showOutputFields": true
        },
        "model": {}
      },
      "pos": {
        "x": 126,
        "y": 182
      }
    },
    {
      "id": "com.twineworks.tweakstreet.library.steps.result.flowresult_06d9119f-a7a3-48b9-a868-4bbab2cf1b76",
      "name": "Set Success",
      "type": "com.twineworks.tweakstreet.library.steps.result.flowresult",
      "instanceCount": {
        "widgetType": "expression/number",
        "widgetData": {
          "text": "1"
        },
        "code": "1"
      },
      "data": {
        "meta": {
          "name": "Set Success"
        },
        "entryVariables": {
          "variables": {
            "list": []
          },
          "editor": {
            "collapsed": false
          }
        },
        "result": {
          "widgetType": "expression/code",
          "widgetData": {
            "text": "true",
            "size": {
              "width": 0,
              "height": 32
            },
            "syntax": "tweakflow"
          },
          "code": "true"
        },
        "editor": {
          "showEntryVariables": false
        },
        "model": {}
      },
      "pos": {
        "x": 882,
        "y": 98
      }
    },
    {
      "id": "com.twineworks.tweakstreet.library.steps.group.groupby_8da43448-d813-4916-8f27-6e01fe9e1606",
      "name": "collect distinct",
      "type": "com.twineworks.tweakstreet.library.steps.group.groupby",
      "instanceCount": {
        "widgetType": "expression/number",
        "widgetData": {
          "text": "1"
        },
        "code": "1"
      },
      "data": {
        "meta": {
          "name": "collect distinct"
        },
        "entryVariables": {
          "variables": {
            "list": []
          },
          "editor": {
            "collapsed": false
          }
        },
        "groupFields": {
          "groupFields": {
            "list": []
          },
          "editor": {
            "collapsed": false
          }
        },
        "collatedGroups": {
          "widgetType": "expression/checkbox-boolean",
          "widgetData": {
            "value": true
          },
          "code": "true"
        },
        "aggregationFields": {
          "aggregationFields": {
            "list": [
              {
                "name": "distinct_guids",
                "type": "any",
                "aggregation": {
                  "widgetType": "expression/aggregate-collect-distinct",
                  "widgetData": {
                    "nilHandling": {
                      "widgetType": "expression/select",
                      "widgetData": {
                        "family": "expression/select/nilHandling",
                        "value": "process"
                      },
                      "code": "'process'"
                    },
                    "nanHandling": {
                      "widgetType": "expression/select",
                      "widgetData": {
                        "family": "expression/select/NaNHandling",
                        "value": "process"
                      },
                      "code": "'process'"
                    },
                    "editor": {
                      "collapsed": true
                    },
                    "model": {}
                  },
                  "code": "let {\n  make_aggregator: (string nilHandling, string nanHandling) -> via {:class 'com.twineworks.tweakstreet.library.aggregation.Aggregators$collect_distinct_aggregator'};\n}\nmake_aggregator('process', 'process')\n"
                },
                "subject": {
                  "widgetType": "expression/field-value-ref",
                  "widgetData": {
                    "fieldSelect": {
                      "value": {
                        "gate": "in",
                        "name": "uuid"
                      }
                    }
                  },
                  "code": "::in.uuid"
                }
              }
            ]
          },
          "editor": {
            "collapsed": false
          }
        },
        "resultVariables": {
          "variables": {
            "list": []
          },
          "editor": {
            "collapsed": false
          }
        },
        "outputFields": {
          "outputFields": {
            "list": []
          },
          "editor": {
            "collapsed": false
          }
        },
        "editor": {
          "showEntryVariables": false,
          "showGroupFields": true,
          "showResultVariables": false,
          "showOutputFields": false
        },
        "model": {}
      },
      "pos": {
        "x": 518,
        "y": 182
      }
    },
    {
      "id": "com.twineworks.tweakstreet.library.steps.decision.decision_9d3b1a50-fb2c-4c69-b9ed-3574d48955de",
      "name": "all distinct?",
      "type": "com.twineworks.tweakstreet.library.steps.decision.decision",
      "instanceCount": {
        "widgetType": "expression/number",
        "widgetData": {
          "text": "1"
        },
        "code": "1"
      },
      "data": {
        "meta": {
          "name": "all distinct?"
        },
        "entryVariables": {
          "variables": {
            "list": []
          },
          "editor": {
            "collapsed": false
          }
        },
        "outputGates": {
          "outputGates": {
            "list": [
              {
                "name": "yes"
              },
              {
                "name": "no"
              }
            ]
          }
        },
        "gate": {
          "widgetType": "expression/code",
          "widgetData": {
            "text": "if data.size(in.distinct_guids) == 100 then 'yes' else 'no'",
            "size": {
              "width": 0,
              "height": 36
            },
            "syntax": "tweakflow"
          },
          "code": "if data.size(in.distinct_guids) == 100 then 'yes' else 'no'"
        },
        "editor": {
          "showEntryVariables": false
        },
        "model": {}
      },
      "pos": {
        "x": 686,
        "y": 182
      }
    },
    {
      "id": "com.twineworks.tweakstreet.library.steps.result.flowresult_6864dac3-489e-471c-a7fd-d449860e1d60",
      "name": "Set Error",
      "type": "com.twineworks.tweakstreet.library.steps.result.flowresult",
      "instanceCount": {
        "widgetType": "expression/number",
        "widgetData": {
          "text": "1"
        },
        "code": "1"
      },
      "data": {
        "meta": {
          "name": "Set Error"
        },
        "entryVariables": {
          "variables": {
            "list": []
          },
          "editor": {
            "collapsed": false
          }
        },
        "result": {
          "widgetType": "expression/code",
          "widgetData": {
            "text": "false",
            "size": {
              "width": 0,
              "height": 32
            },
            "syntax": "tweakflow"
          },
          "code": "false"
        },
        "editor": {
          "showEntryVariables": false
        },
        "model": {}
      },
      "pos": {
        "x": 882,
        "y": 266
      }
    },
    {
      "id": "com.twineworks.tweakstreet.features.demo.steps.guid_81ba2e90-6f66-4308-9683-d96ecf9a88c1",
      "name": "GUID",
      "type": "com.twineworks.tweakstreet.features.demo.steps.guid",
      "instanceCount": {
        "widgetType": "expression/number",
        "widgetData": {
          "text": "1"
        },
        "code": "1"
      },
      "data": {
        "meta": {
          "name": "GUID"
        },
        "entryVariables": {
          "variables": {
            "list": []
          },
          "editor": {
            "collapsed": false
          }
        },
        "resultVariables": {
          "variables": {
            "list": []
          },
          "editor": {
            "collapsed": false
          }
        },
        "outputFields": {
          "outputFields": {
            "list": [
              {
                "name": "uuid",
                "type": "string",
                "value": {
                  "widgetType": "expression/result-ref",
                  "widgetData": {
                    "value": "::results.uuid"
                  },
                  "code": "::results.uuid"
                }
              }
            ]
          },
          "editor": {
            "collapsed": false
          }
        },
        "editor": {
          "showEntryVariables": false,
          "showResultVariables": false,
          "showWriteFields": true,
          "showOutputFields": true
        },
        "model": {}
      },
      "pos": {
        "x": 266,
        "y": 182
      }
    },
    {
      "id": "com.twineworks.tweakstreet.library.steps.map.calculator_0c2c65d9-2f66-42f7-ac6b-38b68c2e466b",
      "name": "ensure format",
      "type": "com.twineworks.tweakstreet.library.steps.map.calculator",
      "instanceCount": {
        "widgetType": "expression/number",
        "widgetData": {
          "text": "1"
        },
        "code": "1"
      },
      "data": {
        "meta": {
          "name": "ensure format"
        },
        "entryVariables": {
          "variables": {
            "list": [
              {
                "name": "matcher",
                "type": "function",
                "value": {
                  "widgetType": "expression/code",
                  "widgetData": {
                    "text": "regex.matching('\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12}')",
                    "size": {
                      "width": 0,
                      "height": 32
                    },
                    "syntax": "tweakflow"
                  },
                  "code": "regex.matching('\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12}')"
                }
              },
              {
                "name": "matches",
                "type": "boolean",
                "value": {
                  "widgetType": "expression/code",
                  "widgetData": {
                    "text": "matcher(in.uuid) || throw(\"uuid \".. in.uuid .. \" does not match expected format\")",
                    "size": {
                      "width": 0,
                      "height": 137
                    },
                    "syntax": "tweakflow"
                  },
                  "code": "matcher(in.uuid) || throw(\"uuid \".. in.uuid .. \" does not match expected format\")"
                }
              }
            ]
          },
          "editor": {
            "collapsed": false
          }
        },
        "outputFields": {
          "outputFields": {
            "list": []
          },
          "editor": {
            "collapsed": false
          }
        },
        "editor": {
          "showEntryVariables": true,
          "showOutputFields": true
        },
        "model": {}
      },
      "pos": {
        "x": 378,
        "y": 182
      }
    }
  ],
  "hops": [
    {
      "id": "1f26bf08-e6c6-4954-ad14-0bed36191646",
      "fromStep": "com.twineworks.tweakstreet.library.steps.group.groupby_8da43448-d813-4916-8f27-6e01fe9e1606",
      "toStep": "com.twineworks.tweakstreet.library.steps.decision.decision_9d3b1a50-fb2c-4c69-b9ed-3574d48955de",
      "fromGate": "out",
      "toGate": "in",
      "partitioner": {
        "widgetType": "expression/code",
        "widgetData": {
          "text": ""
        },
        "code": "nil"
      }
    },
    {
      "id": "1abf606c-6234-4116-9688-09d5c69ebe8f",
      "fromStep": "com.twineworks.tweakstreet.library.steps.decision.decision_9d3b1a50-fb2c-4c69-b9ed-3574d48955de",
      "toStep": "com.twineworks.tweakstreet.library.steps.result.flowresult_06d9119f-a7a3-48b9-a868-4bbab2cf1b76",
      "fromGate": "yes",
      "toGate": "in",
      "partitioner": {
        "widgetType": "expression/code",
        "widgetData": {
          "text": ""
        },
        "code": "nil"
      }
    },
    {
      "id": "ab36e564-35b0-44cf-ae19-88a3032e0adc",
      "fromStep": "com.twineworks.tweakstreet.library.steps.decision.decision_9d3b1a50-fb2c-4c69-b9ed-3574d48955de",
      "toStep": "com.twineworks.tweakstreet.library.steps.result.flowresult_6864dac3-489e-471c-a7fd-d449860e1d60",
      "fromGate": "no",
      "toGate": "in",
      "partitioner": {
        "widgetType": "expression/code",
        "widgetData": {
          "text": ""
        },
        "code": "nil"
      }
    },
    {
      "id": "2493d668-670f-48c6-97da-3b5a366b0690",
      "fromStep": "com.twineworks.tweakstreet.library.steps.flatmap.generaterows_d086dfc6-feb7-48a6-9f42-cd5011c9a10a",
      "toStep": "com.twineworks.tweakstreet.features.demo.steps.guid_81ba2e90-6f66-4308-9683-d96ecf9a88c1",
      "fromGate": "out",
      "toGate": "in",
      "partitioner": {
        "widgetType": "expression/code",
        "widgetData": {
          "text": ""
        },
        "code": "nil"
      }
    },
    {
      "id": "21cae288-ad5f-4205-b5b3-0f64862a5556",
      "fromStep": "com.twineworks.tweakstreet.features.demo.steps.guid_81ba2e90-6f66-4308-9683-d96ecf9a88c1",
      "toStep": "com.twineworks.tweakstreet.library.steps.map.calculator_0c2c65d9-2f66-42f7-ac6b-38b68c2e466b",
      "fromGate": "out",
      "toGate": "in",
      "partitioner": {
        "widgetType": "expression/code",
        "widgetData": {
          "text": ""
        },
        "code": "nil"
      }
    },
    {
      "id": "20aec6e6-20cf-42b9-9ab7-a191add00721",
      "fromStep": "com.twineworks.tweakstreet.library.steps.map.calculator_0c2c65d9-2f66-42f7-ac6b-38b68c2e466b",
      "toStep": "com.twineworks.tweakstreet.library.steps.group.groupby_8da43448-d813-4916-8f27-6e01fe9e1606",
      "fromGate": "out",
      "toGate": "in",
      "partitioner": {
        "widgetType": "expression/code",
        "widgetData": {
          "text": ""
        },
        "code": "nil"
      }
    }
  ]
}